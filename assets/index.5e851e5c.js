(function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))m(A);new MutationObserver(A=>{for(const y of A)if(y.type==="childList")for(const _ of y.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&m(_)}).observe(document,{childList:!0,subtree:!0});function p(A){const y={};return A.integrity&&(y.integrity=A.integrity),A.referrerpolicy&&(y.referrerPolicy=A.referrerpolicy),A.crossorigin==="use-credentials"?y.credentials="include":A.crossorigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function m(A){if(A.ep)return;A.ep=!0;const y=p(A);fetch(A.href,y)}})();(function(o,v){typeof define=="function"&&define.amd?define([],v):window.m4=v()})(globalThis,function(){let o=Float32Array;function v(e){const r=o;return o=e,r}function p(e,r,n){n=n||new o(16);var t=r[0*4+0],a=r[0*4+1],c=r[0*4+2],i=r[0*4+3],R=r[1*4+0],x=r[1*4+1],w=r[1*4+2],E=r[1*4+3],h=r[2*4+0],f=r[2*4+1],D=r[2*4+2],L=r[2*4+3],P=r[3*4+0],B=r[3*4+1],S=r[3*4+2],U=r[3*4+3],s=e[0*4+0],C=e[0*4+1],F=e[0*4+2],V=e[0*4+3],N=e[1*4+0],G=e[1*4+1],H=e[1*4+2],Y=e[1*4+3],k=e[2*4+0],j=e[2*4+1],Q=e[2*4+2],J=e[2*4+3],$=e[3*4+0],d=e[3*4+1],re=e[3*4+2],ne=e[3*4+3];return n[0]=t*s+a*N+c*k+i*$,n[1]=t*C+a*G+c*j+i*d,n[2]=t*F+a*H+c*Q+i*re,n[3]=t*V+a*Y+c*J+i*ne,n[4]=R*s+x*N+w*k+E*$,n[5]=R*C+x*G+w*j+E*d,n[6]=R*F+x*H+w*Q+E*re,n[7]=R*V+x*Y+w*J+E*ne,n[8]=h*s+f*N+D*k+L*$,n[9]=h*C+f*G+D*j+L*d,n[10]=h*F+f*H+D*Q+L*re,n[11]=h*V+f*Y+D*J+L*ne,n[12]=P*s+B*N+S*k+U*$,n[13]=P*C+B*G+S*j+U*d,n[14]=P*F+B*H+S*Q+U*re,n[15]=P*V+B*Y+S*J+U*ne,n}function m(e,r,n){return n=n||new o(3),n[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n}function A(e,r,n){return n=n||new o(3),n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],n}function y(e,r,n){return n=n||new o(3),n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n}function _(e,r){r=r||new o(3);var n=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return n>1e-5&&(r[0]=e[0]/n,r[1]=e[1]/n,r[2]=e[2]/n),r}function g(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function z(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function b(e,r,n){return n=n||new o(3),n[0]=e[1]*r[2]-e[2]*r[1],n[1]=e[2]*r[0]-e[0]*r[2],n[2]=e[0]*r[1]-e[1]*r[0],n}function te(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}function Z(e,r){const n=e[0]-r[0],t=e[1]-r[1],a=e[2]-r[2];return n*n+t*t+a*a}function oe(e,r){return Math.sqrt(Z(e,r))}function ue(e){return e=e||new o(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function K(e,r){return r=r||new o(16),r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15],r}function ae(e,r,n,t){t=t||new o(16);var a=_(A(e,r)),c=_(b(n,a)),i=_(b(a,c));return t[0]=c[0],t[1]=c[1],t[2]=c[2],t[3]=0,t[4]=i[0],t[5]=i[1],t[6]=i[2],t[7]=0,t[8]=a[0],t[9]=a[1],t[10]=a[2],t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function ie(e,r,n,t,a){a=a||new o(16);var c=Math.tan(Math.PI*.5-.5*e),i=1/(n-t);return a[0]=c/r,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=c,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(n+t)*i,a[11]=-1,a[12]=0,a[13]=0,a[14]=n*t*i*2,a[15]=0,a}function he(e,r,n,t,a,c,i){return i=i||new o(16),i[0]=2/(r-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(t-n),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(a-c),i[11]=0,i[12]=(e+r)/(e-r),i[13]=(n+t)/(n-t),i[14]=(a+c)/(a-c),i[15]=1,i}function me(e,r,n,t,a,c,i){i=i||new o(16);var R=r-e,x=t-n,w=c-a;return i[0]=2*a/R,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*a/x,i[6]=0,i[7]=0,i[8]=(e+r)/R,i[9]=(t+n)/x,i[10]=-(c+a)/w,i[11]=-1,i[12]=0,i[13]=0,i[14]=-2*a*c/w,i[15]=0,i}function xe(e,r,n,t){return t=t||new o(16),t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e,t[13]=r,t[14]=n,t[15]=1,t}function Me(e,r,n,t,a){a=a||new o(16);var c=e[0],i=e[1],R=e[2],x=e[3],w=e[1*4+0],E=e[1*4+1],h=e[1*4+2],f=e[1*4+3],D=e[2*4+0],L=e[2*4+1],P=e[2*4+2],B=e[2*4+3],S=e[3*4+0],U=e[3*4+1],s=e[3*4+2],C=e[3*4+3];return e!==a&&(a[0]=c,a[1]=i,a[2]=R,a[3]=x,a[4]=w,a[5]=E,a[6]=h,a[7]=f,a[8]=D,a[9]=L,a[10]=P,a[11]=B),a[12]=c*r+w*n+D*t+S,a[13]=i*r+E*n+L*t+U,a[14]=R*r+h*n+P*t+s,a[15]=x*r+f*n+B*t+C,a}function Ee(e,r){r=r||new o(16);var n=Math.cos(e),t=Math.sin(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=t,r[7]=0,r[8]=0,r[9]=-t,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Te(e,r,n){n=n||new o(16);var t=e[4],a=e[5],c=e[6],i=e[7],R=e[8],x=e[9],w=e[10],E=e[11],h=Math.cos(r),f=Math.sin(r);return n[4]=h*t+f*R,n[5]=h*a+f*x,n[6]=h*c+f*w,n[7]=h*i+f*E,n[8]=h*R-f*t,n[9]=h*x-f*a,n[10]=h*w-f*c,n[11]=h*E-f*i,e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function ce(e,r){r=r||new o(16);var n=Math.cos(e),t=Math.sin(e);return r[0]=n,r[1]=0,r[2]=-t,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=t,r[9]=0,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function ve(e,r,n){n=n||new o(16);var t=e[0*4+0],a=e[0*4+1],c=e[0*4+2],i=e[0*4+3],R=e[2*4+0],x=e[2*4+1],w=e[2*4+2],E=e[2*4+3],h=Math.cos(r),f=Math.sin(r);return n[0]=h*t-f*R,n[1]=h*a-f*x,n[2]=h*c-f*w,n[3]=h*i-f*E,n[8]=h*R+f*t,n[9]=h*x+f*a,n[10]=h*w+f*c,n[11]=h*E+f*i,e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function Ue(e,r){r=r||new o(16);var n=Math.cos(e),t=Math.sin(e);return r[0]=n,r[1]=t,r[2]=0,r[3]=0,r[4]=-t,r[5]=n,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function se(e,r,n){n=n||new o(16);var t=e[0*4+0],a=e[0*4+1],c=e[0*4+2],i=e[0*4+3],R=e[1*4+0],x=e[1*4+1],w=e[1*4+2],E=e[1*4+3],h=Math.cos(r),f=Math.sin(r);return n[0]=h*t+f*R,n[1]=h*a+f*x,n[2]=h*c+f*w,n[3]=h*i+f*E,n[4]=h*R-f*t,n[5]=h*x-f*a,n[6]=h*w-f*c,n[7]=h*E-f*i,e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function pe(e,r,n){n=n||new o(16);var t=e[0],a=e[1],c=e[2],i=Math.sqrt(t*t+a*a+c*c);t/=i,a/=i,c/=i;var R=t*t,x=a*a,w=c*c,E=Math.cos(r),h=Math.sin(r),f=1-E;return n[0]=R+(1-R)*E,n[1]=t*a*f+c*h,n[2]=t*c*f-a*h,n[3]=0,n[4]=t*a*f-c*h,n[5]=x+(1-x)*E,n[6]=a*c*f+t*h,n[7]=0,n[8]=t*c*f+a*h,n[9]=a*c*f-t*h,n[10]=w+(1-w)*E,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Fe(e,r,n,t){t=t||new o(16);var a=r[0],c=r[1],i=r[2],R=Math.sqrt(a*a+c*c+i*i);a/=R,c/=R,i/=R;var x=a*a,w=c*c,E=i*i,h=Math.cos(n),f=Math.sin(n),D=1-h,L=x+(1-x)*h,P=a*c*D+i*f,B=a*i*D-c*f,S=a*c*D-i*f,U=w+(1-w)*h,s=c*i*D+a*f,C=a*i*D+c*f,F=c*i*D-a*f,V=E+(1-E)*h,N=e[0],G=e[1],H=e[2],Y=e[3],k=e[4],j=e[5],Q=e[6],J=e[7],$=e[8],d=e[9],re=e[10],ne=e[11];return t[0]=L*N+P*k+B*$,t[1]=L*G+P*j+B*d,t[2]=L*H+P*Q+B*re,t[3]=L*Y+P*J+B*ne,t[4]=S*N+U*k+s*$,t[5]=S*G+U*j+s*d,t[6]=S*H+U*Q+s*re,t[7]=S*Y+U*J+s*ne,t[8]=C*N+F*k+V*$,t[9]=C*G+F*j+V*d,t[10]=C*H+F*Q+V*re,t[11]=C*Y+F*J+V*ne,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t}function Ve(e,r,n,t){return t=t||new o(16),t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Xe(e,r,n,t,a){return a=a||new o(16),a[0]=r*e[0*4+0],a[1]=r*e[0*4+1],a[2]=r*e[0*4+2],a[3]=r*e[0*4+3],a[4]=n*e[1*4+0],a[5]=n*e[1*4+1],a[6]=n*e[1*4+2],a[7]=n*e[1*4+3],a[8]=t*e[2*4+0],a[9]=t*e[2*4+1],a[10]=t*e[2*4+2],a[11]=t*e[2*4+3],e!==a&&(a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a}function Oe(e,r,n,t){t=t||new o(16);const a=r[0],c=r[1],i=r[2],R=r[3],x=a+a,w=c+c,E=i+i,h=a*x,f=a*w,D=a*E,L=c*w,P=c*E,B=i*E,S=R*x,U=R*w,s=R*E,C=n[0],F=n[1],V=n[2];return t[0]=(1-(L+B))*C,t[1]=(f+s)*C,t[2]=(D-U)*C,t[3]=0,t[4]=(f-s)*F,t[5]=(1-(h+B))*F,t[6]=(P+S)*F,t[7]=0,t[8]=(D+U)*V,t[9]=(P-S)*V,t[10]=(1-(h+L))*V,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function qe(e,r){const n=e[0],t=e[4],a=e[8],c=e[1],i=e[5],R=e[9],x=e[2],w=e[6],E=e[10],h=n+i+E;if(h>0){const f=.5/Math.sqrt(h+1);r[3]=.25/f,r[0]=(w-R)*f,r[1]=(a-x)*f,r[2]=(c-t)*f}else if(n>i&&n>E){const f=2*Math.sqrt(1+n-i-E);r[3]=(w-R)/f,r[0]=.25*f,r[1]=(t+c)/f,r[2]=(a+x)/f}else if(i>E){const f=2*Math.sqrt(1+i-n-E);r[3]=(a-x)/f,r[0]=(t+c)/f,r[1]=.25*f,r[2]=(R+w)/f}else{const f=2*Math.sqrt(1+E-n-i);r[3]=(c-t)/f,r[0]=(a+x)/f,r[1]=(R+w)/f,r[2]=.25*f}}function l(e,r,n,t){let a=m4.length(e.slice(0,3));const c=m4.length(e.slice(4,7)),i=m4.length(e.slice(8,11));T(e)<0&&(a=-a),r[0]=e[12],r[1]=e[13],r[2]=e[14];const x=m4.copy(e),w=1/a,E=1/c,h=1/i;x[0]*=w,x[1]*=w,x[2]*=w,x[4]*=E,x[5]*=E,x[6]*=E,x[8]*=h,x[9]*=h,x[10]*=h,qe(x,n),t[0]=a,t[1]=c,t[2]=i}function T(e){var r=e[0],n=e[0*4+1],t=e[0*4+2],a=e[0*4+3],c=e[1*4+0],i=e[1*4+1],R=e[1*4+2],x=e[1*4+3],w=e[2*4+0],E=e[2*4+1],h=e[2*4+2],f=e[2*4+3],D=e[3*4+0],L=e[3*4+1],P=e[3*4+2],B=e[3*4+3],S=h*B,U=P*f,s=R*B,C=P*x,F=R*f,V=h*x,N=t*B,G=P*a,H=t*f,Y=h*a,k=t*x,j=R*a,Q=S*i+C*E+F*L-(U*i+s*E+V*L),J=U*n+N*E+Y*L-(S*n+G*E+H*L),$=s*n+G*i+k*L-(C*n+N*i+j*L),d=V*n+H*i+j*E-(F*n+Y*i+k*E);return 1/(r*Q+c*J+w*$+D*d)}function M(e,r){r=r||new o(16);var n=e[0*4+0],t=e[0*4+1],a=e[0*4+2],c=e[0*4+3],i=e[1*4+0],R=e[1*4+1],x=e[1*4+2],w=e[1*4+3],E=e[2*4+0],h=e[2*4+1],f=e[2*4+2],D=e[2*4+3],L=e[3*4+0],P=e[3*4+1],B=e[3*4+2],S=e[3*4+3],U=f*S,s=B*D,C=x*S,F=B*w,V=x*D,N=f*w,G=a*S,H=B*c,Y=a*D,k=f*c,j=a*w,Q=x*c,J=E*P,$=L*h,d=i*P,re=L*R,ne=i*h,Re=E*R,we=n*P,_e=L*t,Ae=n*h,ge=E*t,Le=n*R,be=i*t,je=U*R+F*h+V*P-(s*R+C*h+N*P),We=s*t+G*h+k*P-(U*t+H*h+Y*P),Ze=C*t+H*R+j*P-(F*t+G*R+Q*P),Ke=N*t+Y*R+Q*h-(V*t+k*R+j*h),W=1/(n*je+i*We+E*Ze+L*Ke);return r[0]=W*je,r[1]=W*We,r[2]=W*Ze,r[3]=W*Ke,r[4]=W*(s*i+C*E+N*L-(U*i+F*E+V*L)),r[5]=W*(U*n+H*E+Y*L-(s*n+G*E+k*L)),r[6]=W*(F*n+G*i+Q*L-(C*n+H*i+j*L)),r[7]=W*(V*n+k*i+j*E-(N*n+Y*i+Q*E)),r[8]=W*(J*w+re*D+ne*S-($*w+d*D+Re*S)),r[9]=W*($*c+we*D+ge*S-(J*c+_e*D+Ae*S)),r[10]=W*(d*c+_e*w+Le*S-(re*c+we*w+be*S)),r[11]=W*(Re*c+Ae*w+be*D-(ne*c+ge*w+Le*D)),r[12]=W*(d*f+Re*B+$*x-(ne*B+J*x+re*f)),r[13]=W*(Ae*B+J*a+_e*f-(we*f+ge*B+$*a)),r[14]=W*(we*x+be*B+re*a-(Le*B+d*a+_e*x)),r[15]=W*(Le*f+ne*a+ge*x-(Ae*x+be*f+Re*a)),r}function I(e,r,n){n=n||new o(4);for(var t=0;t<4;++t){n[t]=0;for(var a=0;a<4;++a)n[t]+=r[a]*e[a*4+t]}return n}function O(e,r,n){n=n||new o(3);var t=r[0],a=r[1],c=r[2],i=t*e[0*4+3]+a*e[1*4+3]+c*e[2*4+3]+e[3*4+3];return n[0]=(t*e[0*4+0]+a*e[1*4+0]+c*e[2*4+0]+e[3*4+0])/i,n[1]=(t*e[0*4+1]+a*e[1*4+1]+c*e[2*4+1]+e[3*4+1])/i,n[2]=(t*e[0*4+2]+a*e[1*4+2]+c*e[2*4+2]+e[3*4+2])/i,n}function q(e,r,n){n=n||new o(3);var t=r[0],a=r[1],c=r[2];return n[0]=t*e[0*4+0]+a*e[1*4+0]+c*e[2*4+0],n[1]=t*e[0*4+1]+a*e[1*4+1]+c*e[2*4+1],n[2]=t*e[0*4+2]+a*e[1*4+2]+c*e[2*4+2],n}function ee(e,r,n){n=n||new o(3);var t=M(e),a=r[0],c=r[1],i=r[2];return n[0]=a*t[0*4+0]+c*t[0*4+1]+i*t[0*4+2],n[1]=a*t[1*4+0]+c*t[1*4+1]+i*t[1*4+2],n[2]=a*t[2*4+0]+c*t[2*4+1]+i*t[2*4+2],n}function fe(e,r){return r=r||new o(16),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}return{copy:fe,lookAt:ae,addVectors:m,subtractVectors:A,scaleVector:y,distance:oe,distanceSq:Z,normalize:_,compose:Oe,cross:b,decompose:l,dot:te,identity:ue,transpose:K,length:g,lengthSq:z,orthographic:he,frustum:me,perspective:ie,translation:xe,translate:Me,xRotation:Ee,yRotation:ce,zRotation:Ue,xRotate:Te,yRotate:ve,zRotate:se,axisRotation:pe,axisRotate:Fe,scaling:Ve,scale:Xe,multiply:p,inverse:M,transformVector:I,transformPoint:O,transformDirection:q,transformNormal:ee,setDefaultType:v}});var hr=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif

varying vec2 vTextureCoords;
uniform sampler2D textureUnit;

void main() {
    vec4 texture = texture2D(textureUnit, vTextureCoords);
    gl_FragColor = texture;
}`,pr=`attribute vec3 vertex;
attribute vec2 textureCoords;
uniform mat4 ModelViewMatrix, ProjectionMatrix;
varying vec2 vTextureCoords;

void main() {
    vec4 vertPos4 = ModelViewMatrix * vec4(vertex, 1.0);
    vec3 vertPos = vec3(vertPos4) / vertPos4.w;
    gl_Position = ProjectionMatrix*vertPos4;
    vTextureCoords = textureCoords;
}`,De=!1;function mr(o,v,p,m,A){var y=new Array(3),_=new Array(3),g=new Array(3),z,b;this.setView=function(l,T,M){g=T===void 0?[0,0,10]:T,M=M===void 0?[0,1,0]:M,z=l,pe(g,g),Fe(_,g),Oe(_,_,Ue(g,M)),Xe(_,M,_),pe(_,_),qe(y,_,g)},this.getViewMatrix=function(){var l=[y[0],_[0],g[0],0,y[1],_[1],g[1],0,y[2],_[2],g[2],0,0,0,0,1];if(b!==void 0){var T=b[0]-l[0]*b[0]-l[4]*b[1]-l[8]*b[2],M=b[1]-l[1]*b[0]-l[5]*b[1]-l[9]*b[2],I=b[2]-l[2]*b[0]-l[6]*b[1]-l[10]*b[2];l[12]=T,l[13]=M,l[14]=I}return z!==void 0&&(l[14]-=z),l},this.getViewDistance=function(){return z},this.setViewDistance=function(l){z=l},this.getRotationCenter=function(){return b===void 0?[0,0,0]:b},this.setRotationCenter=function(l){b=l},this.setView(p,m,A),o.addEventListener("mousedown",he,!1),o.addEventListener("touchstart",Me,!1);function te(l,T){function M(q,ee,fe){var e=2*(q[0]*ee[0]+q[1]*ee[1]+q[2]*ee[2]);fe[0]=e*q[0]-ee[0],fe[1]=e*q[1]-ee[1],fe[2]=e*q[2]-ee[2]}pe(l,l),pe(T,T);var I=[0,0,0];Ve(I,l,T),pe(I,I);var O=[0,0,0];M(I,g,O),M(l,O,g),M(I,y,O),M(l,O,y),M(I,_,O),M(l,O,_)}var Z,oe,ue,K,ae,ie=!1;function he(l){if(!ie){ie=!0,Z=o.width/2,oe=o.height/2;var T=Math.min(Z,oe);ue=T*T,document.addEventListener("mousemove",me,!1),document.addEventListener("mouseup",xe,!1);var M=o.getBoundingClientRect();K=l.clientX-M.left,ae=l.clientY-M.top}}function me(l){if(!!ie){var T=o.getBoundingClientRect(),M=l.clientX-T.left,I=l.clientY-T.top,O=ve(K,ae),q=ve(M,I);te(O,q),K=M,ae=I,v&&v()}}function xe(l){ie&&(document.removeEventListener("mousemove",me,!1),document.removeEventListener("mouseup",xe,!1),ie=!1)}function Me(l){if(l.touches.length!=1){ce();return}l.preventDefault();var T=o.getBoundingClientRect();K=l.touches[0].clientX-T.left,ae=l.touches[0].clientY-T.top,o.addEventListener("touchmove",Ee,!1),o.addEventListener("touchend",Te,!1),o.addEventListener("touchcancel",ce,!1),De=!0,Z=o.width/2,oe=o.height/2;var M=Math.min(Z,oe);ue=M*M}function Ee(l){if(l.touches.length!=1||!De){ce();return}l.preventDefault();var T=o.getBoundingClientRect(),M=l.touches[0].clientX-T.left,I=l.touches[0].clientY-T.top,O=ve(K,ae),q=ve(M,I);te(O,q),K=M,ae=I,v&&v()}function Te(l){ce()}function ce(){De&&(De=!1,o.removeEventListener("touchmove",Ee,!1),o.removeEventListener("touchend",Te,!1),o.removeEventListener("touchcancel",ce,!1))}function ve(l,T){var M=l-Z,I=oe-T,O=M*y[0]+I*_[0],q=M*y[1]+I*_[1],ee=M*y[2]+I*_[2],fe=O*O+q*q+ee*ee;if(fe>ue)return[O,q,ee];var e=Math.sqrt(ue-fe);return[O+e*g[0],q+e*g[1],ee+e*g[2]]}function Ue(l,T){return l[0]*T[0]+l[1]*T[1]+l[2]*T[2]}function se(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1]+l[2]*l[2])}function pe(l,T){var M=se(T);l[0]=T[0]/M,l[1]=T[1]/M,l[2]=T[2]/M}function Fe(l,T){l[0]=T[0],l[1]=T[1],l[2]=T[2]}function Ve(l,T,M){l[0]=T[0]+M[0],l[1]=T[1]+M[1],l[2]=T[2]+M[2]}function Xe(l,T,M){l[0]=T[0]-M[0],l[1]=T[1]-M[1],l[2]=T[2]-M[2]}function Oe(l,T,M){l[0]=T[0]*M,l[1]=T[1]*M,l[2]=T[2]*M}function qe(l,T,M){var I=T[1]*M[2]-T[2]*M[1],O=T[2]*M[0]-T[0]*M[2],q=T[0]*M[1]-T[1]*M[0];l[0]=I,l[1]=O,l[2]=q}}const ar=[{id:"eyeSeparation",label:"Eye Separation",min:0,max:10,step:.01,value:2,elementRef:null},{id:"fov",label:"Field of View",min:.5,max:3,step:.01,value:1.45,elementRef:null},{id:"nearClippingDistance",label:"Near Clipping Distance",min:1,max:20,step:.5,value:10,elementRef:null},{id:"convergenceDistance",label:"Convergence distance",min:1,max:100,step:1,value:40,elementRef:null}],xr=o=>{const v=document.querySelector(o);v.innerHTML="",ar.forEach(p=>{const m=document.createElement("div"),A=document.createElement("div");A.classList.add("title-wrapper");const y=document.createElement("label");y.setAttribute("for",p.id),y.innerHTML=p.label;const _=document.createElement("span");_.setAttribute("class","slider-value"),_.innerHTML=p.value;const g=document.createElement("input");g.setAttribute("id",p.id),g.setAttribute("type","range"),g.setAttribute("min",p.min),g.setAttribute("max",p.max),g.setAttribute("step",p.step),g.setAttribute("value",p.value),g.addEventListener("input",z=>{_.innerHTML=z.target.value}),p.elementRef=g,m.appendChild(A),A.appendChild(y),A.appendChild(_),m.appendChild(g),v.appendChild(m)})},Pe=o=>{var p;const v=ar.find(m=>m.id===o);return parseFloat((p=v==null?void 0:v.elementRef)==null?void 0:p.value,10)},Er=()=>new Promise(async(o,v)=>{try{const p=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});o(p)}catch(p){v(p)}}),Tr=()=>document.getElementById("webcam").checked,Mr=o=>{const v=document.getElementById("webcam");v.addEventListener("change",async p=>{v.checked?o.srcObject=await Er():o.srcObject=null})},yr=o=>{const v=o.createTexture();return o.bindTexture(o.TEXTURE_2D,v),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),v};let ye=null;const le={alpha:0,beta:0,gamma:0,event:null},Qe=async()=>{if(!(typeof DeviceOrientationEvent>"u"||typeof DeviceOrientationEvent.requestPermission!="function"))try{await DeviceOrientationEvent.requestPermission()==="granted"&&(console.log("Permission granted"),window.removeEventListener("deviceorientation",ye,!0),ye=v=>{le.alpha=v.alpha,le.beta=v.beta,le.gamma=v.gamma,le.event=v},window.addEventListener("deviceorientation",ye,!0))}catch{console.error("No device orientation permission")}},Rr=async()=>{const o=document.getElementById("device-orientation");o.checked?Qe().catch(console.error):window.removeEventListener("deviceorientation",ye,!0),o.addEventListener("change",async v=>{o.checked?Qe().catch(console.error):window.removeEventListener("deviceorientation",ye,!0)})},wr=o=>new Promise((v,p)=>{const m=new XMLHttpRequest;m.open("GET",o,!0),m.responseType="arraybuffer",m.onload=function(A){v(m.response)},m.send()}),_r=async o=>{const v=new AudioContext,p=v.createGain();p.connect(v.destination);const m={source:v.createBufferSource(),volume:v.createGain()};m.source.connect(m.volume),m.volume.connect(p),m.source.loop=!0;const A=await wr(o);try{m.buffer=await v.decodeAudioData(A),m.source.buffer=m.buffer,m.source.start(v.currentTime)}catch(g){console.error(g)}const y=v.createPanner(),_=v.createBiquadFilter();return m.source.connect(y),y.connect(_),_.connect(v.destination),_.type="peaking",_.frequency.value=1e3,_.gain.value=25,_.Q.value=1,[m,y]},Ar=o=>o*Math.PI/180;let u,Ce,Ne,X,or,Ge,ir,Be,gr,Se,He,cr,Je=0,Ie=[0,0,0];function ze(o){this.name=o,this.iVertexBuffer=u.createBuffer(),this.iTextureBuffer=u.createBuffer(),this.count=0,this.BufferData=function(v,p){u.bindBuffer(u.ARRAY_BUFFER,this.iVertexBuffer),u.bufferData(u.ARRAY_BUFFER,new Float32Array(v),u.STREAM_DRAW),u.bindBuffer(u.ARRAY_BUFFER,this.iTextureBuffer),u.bufferData(u.ARRAY_BUFFER,new Float32Array(p),u.STREAM_DRAW),u.enableVertexAttribArray(X.iTextureCoords),u.vertexAttribPointer(X.iTextureCoords,2,u.FLOAT,!1,0,0),this.count=v.length/3},this.Draw=function(){u.bindBuffer(u.ARRAY_BUFFER,this.iVertexBuffer),u.vertexAttribPointer(X.iAttribVertex,3,u.FLOAT,!1,0,0),u.enableVertexAttribArray(X.iAttribVertex),u.bindBuffer(u.ARRAY_BUFFER,this.iTextureBuffer),u.vertexAttribPointer(X.iTextureCoords,2,u.FLOAT,!1,0,0),u.enableVertexAttribArray(X.iTextureCoords),u.drawArrays(u.TRIANGLE_STRIP,0,this.count)},this.DrawSphere=function(){this.Draw(),u.drawArrays(u.LINE_STRIP,0,this.count)}}function Lr(o,v){this.name=o,this.prog=v,this.iAttribVertex=-1,this.iTextureCoords=-1,this.iTextureUnit=-1,this.Use=function(){u.useProgram(this.prog)}}function ur(){u.clearColor(1,1,1,1),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT);const o=Pe("eyeSeparation"),v=Pe("fov"),p=Pe("nearClippingDistance"),m=Pe("convergenceDistance"),A=2e3;let y,_,g,z;g=p*Math.tan(v/2),z=-g;const b=Math.tan(v/2)*m,te=b-o/2,Z=b+o/2;y=-te*p/m,_=Z*p/m;const oe=m4.orthographic(y,_,z,g,p,A);y=-Z*p/m,_=te*p/m;const ue=m4.orthographic(y,_,z,g,p,A);let K;if(cr.checked&&le.alpha&&le.beta&&le.gamma){const ce=le.alpha*(Math.PI/180);tr(ce+Math.PI/2)}else Je+=.02,tr(Je);K=or.getViewMatrix();const ae=m4.axisRotation([.707,.707,0],0),ie=m4.translation(-.01,0,-20),he=m4.translation(.01,0,-20);if(Tr()){const ce=m4.orthographic(0,1,0,1,-1,1),ve=m4.multiply(ae,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);u.uniformMatrix4fv(X.iModelViewMatrix,!1,ve),u.uniformMatrix4fv(X.iProjectionMatrix,!1,ce),u.bindTexture(u.TEXTURE_2D,ir),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,Be),Ne.Draw()}Se==null||Se.setPosition(...Ie),u.bindTexture(u.TEXTURE_2D,null);const me=m4.perspective(Ar(90),1,.1,100),xe=m4.translation(...Ie),Me=m4.multiply(xe,K);u.uniformMatrix4fv(X.iProjectionMatrix,!1,me),u.uniformMatrix4fv(X.iModelViewMatrix,!1,Me),He.DrawSphere(),u.bindTexture(u.TEXTURE_2D,Ge),u.clear(u.DEPTH_BUFFER_BIT);const Ee=m4.multiply(ie,K);u.uniformMatrix4fv(X.iModelViewMatrix,!1,Ee),u.uniformMatrix4fv(X.iProjectionMatrix,!1,oe),u.colorMask(!0,!1,!1,!1),Ce.Draw(),u.clear(u.DEPTH_BUFFER_BIT);const Te=m4.multiply(he,K);u.uniformMatrix4fv(X.iModelViewMatrix,!1,Te),u.uniformMatrix4fv(X.iProjectionMatrix,!1,ue),u.colorMask(!1,!0,!0,!1),Ce.Draw(),u.colorMask(!0,!0,!0,!0)}let ke=1;function br(o,v){return o*Math.cos(v)/ke}function Dr(o,v){return o*Math.sin(v)/ke}function Pr(o,v,p,m,A,y,_){let g=m*Math.PI/p;return A*Math.pow(Math.E,-y*o)*Math.sin(g*o+_)/ke}let Ye=6,$e=6,de=4,er=.5,rr=0;const vr=Ye,fr=2*Math.PI,Br=(o,v)=>[o/fr,v/vr],nr=(o,v,p,m,A,y,_,g,z)=>{const b=br(o,v),te=Dr(o,v),Z=Pr(o,v,p,m,A,y,_);g.push(b,te,Z),z.push(...Br(v,o))};function Sr(){const o=[],v=[];for(let p=0;p<=vr;p+=.001)for(let m=0;m<fr;m+=.5)nr(p,m,Ye,$e,de,er,rr,o,v),nr(p+.5,m+.5,Ye,$e,de,er,rr,o,v);return{vertexList:o,textureList:v}}function Cr(o,v,p){const m=[],A=[];for(let y=0;y<=v;y++){const _=y*Math.PI/v,g=Math.sin(_),z=Math.cos(_);for(let b=0;b<=p;b++){const te=b*2*Math.PI/p,Z=Math.sin(te),oe=Math.cos(te),ue=o*oe*g,K=o*z,ae=o*Z*g;m.push(ue,K,ae);const ie=1-b/p,he=1-y/v;A.push(ie,he)}}return{vertexList:m,textureList:A}}function Ir(){let o=Ur(u,pr,hr);X=new Lr("Basic",o),X.Use(),X.iAttribVertex=u.getAttribLocation(o,"vertex"),X.iModelViewMatrix=u.getUniformLocation(o,"ModelViewMatrix"),X.iProjectionMatrix=u.getUniformLocation(o,"ProjectionMatrix"),X.iTextureCoords=u.getAttribLocation(o,"textureCoords"),X.iTextureUnit=u.getUniformLocation(o,"textureUnit"),Ce=new ze("Surface");const{vertexList:v,textureList:p}=Sr();Ce.BufferData(v,p),Ne=new ze("Background"),Ne.BufferData([0,0,0,1,0,0,1,1,0,1,1,0,0,1,0,0,0,0],[1,1,0,1,0,0,0,0,1,0,1,1]);const m=Cr(.5,500,500);He=new ze("Sphere"),He.BufferData(m.vertexList,m.textureList),Or(),u.enable(u.DEPTH_TEST)}function lr(){ur(),window.requestAnimationFrame(lr)}function Ur(o,v,p){let m=o.createShader(o.VERTEX_SHADER);if(o.shaderSource(m,v),o.compileShader(m),!o.getShaderParameter(m,o.COMPILE_STATUS))throw new Error("Error in vertex shader:  "+o.getShaderInfoLog(m));let A=o.createShader(o.FRAGMENT_SHADER);if(o.shaderSource(A,p),o.compileShader(A),!o.getShaderParameter(A,o.COMPILE_STATUS))throw new Error("Error in fragment shader:  "+o.getShaderInfoLog(A));let y=o.createProgram();if(o.attachShader(y,m),o.attachShader(y,A),o.linkProgram(y),!o.getProgramParameter(y,o.LINK_STATUS))throw new Error("Link error in program:  "+o.getProgramInfoLog(y));return y}const sr=()=>{document.getElementById("request-orientation").addEventListener("click",()=>{Rr()})},Fr=()=>{document.getElementById("audio").addEventListener("click",async v=>{[gr,Se]=await _r("audio.mp3").catch(console.error)})};function tr(o,v=0,p=-5,m=4){Ie[0]=v+Math.cos(o)*m,Ie[2]=p+Math.sin(o)*m}async function Vr(){xr("#controls");let o;try{if(o=document.getElementById("webglcanvas"),u=o.getContext("webgl"),Be=document.createElement("video"),Be.setAttribute("autoplay","true"),cr=document.getElementById("device-orientation"),ir=yr(u),Mr(Be),sr(),Fr(),!u)throw"Browser does not support WebGL"}catch{document.getElementById("canvas-holder").innerHTML="<p>Sorry, could not get a WebGL graphics context.</p>";return}try{Ir()}catch(v){document.getElementById("canvas-holder").innerHTML="<p>Sorry, could not initialize the WebGL graphics context: "+v+"</p>";return}or=new mr(o,ur,0),lr()}async function Xr(){return new Promise((o,v)=>{const p=new Image;p.src="texture.png",p.crossOrigin="anonymous",p.addEventListener("load",function(){o(p)})})}const Or=async()=>{const o=await Xr();Ge=u.createTexture(),u.bindTexture(u.TEXTURE_2D,Ge),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,o)};document.addEventListener("DOMContentLoaded",Vr);
