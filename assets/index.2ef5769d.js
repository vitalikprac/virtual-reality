(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))A(g);new MutationObserver(g=>{for(const R of g)if(R.type==="childList")for(const _ of R.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&A(_)}).observe(document,{childList:!0,subtree:!0});function T(g){const R={};return g.integrity&&(R.integrity=g.integrity),g.referrerpolicy&&(R.referrerPolicy=g.referrerpolicy),g.crossorigin==="use-credentials"?R.credentials="include":g.crossorigin==="anonymous"?R.credentials="omit":R.credentials="same-origin",R}function A(g){if(g.ep)return;g.ep=!0;const R=T(g);fetch(g.href,R)}})();(function(o,h){typeof define=="function"&&define.amd?define([],h):window.m4=h()})(globalThis,function(){let o=Float32Array;function h(e){const r=o;return o=e,r}function T(e,r,n){n=n||new o(16);var a=r[0*4+0],t=r[0*4+1],c=r[0*4+2],i=r[0*4+3],M=r[1*4+0],p=r[1*4+1],y=r[1*4+2],m=r[1*4+3],l=r[2*4+0],u=r[2*4+1],b=r[2*4+2],L=r[2*4+3],D=r[3*4+0],P=r[3*4+1],B=r[3*4+2],I=r[3*4+3],F=e[0*4+0],C=e[0*4+1],V=e[0*4+2],X=e[0*4+3],q=e[1*4+0],G=e[1*4+1],Y=e[1*4+2],H=e[1*4+3],k=e[2*4+0],W=e[2*4+1],K=e[2*4+2],J=e[2*4+3],Q=e[3*4+0],$=e[3*4+1],re=e[3*4+2],ne=e[3*4+3];return n[0]=a*F+t*q+c*k+i*Q,n[1]=a*C+t*G+c*W+i*$,n[2]=a*V+t*Y+c*K+i*re,n[3]=a*X+t*H+c*J+i*ne,n[4]=M*F+p*q+y*k+m*Q,n[5]=M*C+p*G+y*W+m*$,n[6]=M*V+p*Y+y*K+m*re,n[7]=M*X+p*H+y*J+m*ne,n[8]=l*F+u*q+b*k+L*Q,n[9]=l*C+u*G+b*W+L*$,n[10]=l*V+u*Y+b*K+L*re,n[11]=l*X+u*H+b*J+L*ne,n[12]=D*F+P*q+B*k+I*Q,n[13]=D*C+P*G+B*W+I*$,n[14]=D*V+P*Y+B*K+I*re,n[15]=D*X+P*H+B*J+I*ne,n}function A(e,r,n){return n=n||new o(3),n[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n}function g(e,r,n){return n=n||new o(3),n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],n}function R(e,r,n){return n=n||new o(3),n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n}function _(e,r){r=r||new o(3);var n=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return n>1e-5&&(r[0]=e[0]/n,r[1]=e[1]/n,r[2]=e[2]/n),r}function w(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function Z(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function S(e,r,n){return n=n||new o(3),n[0]=e[1]*r[2]-e[2]*r[1],n[1]=e[2]*r[0]-e[0]*r[2],n[2]=e[0]*r[1]-e[1]*r[0],n}function oe(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}function s(e,r){const n=e[0]-r[0],a=e[1]-r[1],t=e[2]-r[2];return n*n+a*a+t*t}function ie(e,r){return Math.sqrt(s(e,r))}function fe(e){return e=e||new o(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function d(e,r){return r=r||new o(16),r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15],r}function ae(e,r,n,a){a=a||new o(16);var t=_(g(e,r)),c=_(S(n,t)),i=_(S(t,c));return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=0,a[4]=i[0],a[5]=i[1],a[6]=i[2],a[7]=0,a[8]=t[0],a[9]=t[1],a[10]=t[2],a[11]=0,a[12]=e[0],a[13]=e[1],a[14]=e[2],a[15]=1,a}function ce(e,r,n,a,t){t=t||new o(16);var c=Math.tan(Math.PI*.5-.5*e),i=1/(n-a);return t[0]=c/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+a)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=n*a*i*2,t[15]=0,t}function Me(e,r,n,a,t,c,i){return i=i||new o(16),i[0]=2/(r-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(a-n),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(t-c),i[11]=0,i[12]=(e+r)/(e-r),i[13]=(n+a)/(n-a),i[14]=(t+c)/(t-c),i[15]=1,i}function xe(e,r,n,a,t,c,i){i=i||new o(16);var M=r-e,p=a-n,y=c-t;return i[0]=2*t/M,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*t/p,i[6]=0,i[7]=0,i[8]=(e+r)/M,i[9]=(a+n)/p,i[10]=-(c+t)/y,i[11]=-1,i[12]=0,i[13]=0,i[14]=-2*t*c/y,i[15]=0,i}function Ee(e,r,n,a){return a=a||new o(16),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=e,a[13]=r,a[14]=n,a[15]=1,a}function me(e,r,n,a,t){t=t||new o(16);var c=e[0],i=e[1],M=e[2],p=e[3],y=e[1*4+0],m=e[1*4+1],l=e[1*4+2],u=e[1*4+3],b=e[2*4+0],L=e[2*4+1],D=e[2*4+2],P=e[2*4+3],B=e[3*4+0],I=e[3*4+1],F=e[3*4+2],C=e[3*4+3];return e!==t&&(t[0]=c,t[1]=i,t[2]=M,t[3]=p,t[4]=y,t[5]=m,t[6]=l,t[7]=u,t[8]=b,t[9]=L,t[10]=D,t[11]=P),t[12]=c*r+y*n+b*a+B,t[13]=i*r+m*n+L*a+I,t[14]=M*r+l*n+D*a+F,t[15]=p*r+u*n+P*a+C,t}function le(e,r){r=r||new o(16);var n=Math.cos(e),a=Math.sin(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=a,r[7]=0,r[8]=0,r[9]=-a,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Te(e,r,n){n=n||new o(16);var a=e[4],t=e[5],c=e[6],i=e[7],M=e[8],p=e[9],y=e[10],m=e[11],l=Math.cos(r),u=Math.sin(r);return n[4]=l*a+u*M,n[5]=l*t+u*p,n[6]=l*c+u*y,n[7]=l*i+u*m,n[8]=l*M-u*a,n[9]=l*p-u*t,n[10]=l*y-u*c,n[11]=l*m-u*i,e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function ue(e,r){r=r||new o(16);var n=Math.cos(e),a=Math.sin(e);return r[0]=n,r[1]=0,r[2]=-a,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=a,r[9]=0,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function he(e,r,n){n=n||new o(16);var a=e[0*4+0],t=e[0*4+1],c=e[0*4+2],i=e[0*4+3],M=e[2*4+0],p=e[2*4+1],y=e[2*4+2],m=e[2*4+3],l=Math.cos(r),u=Math.sin(r);return n[0]=l*a-u*M,n[1]=l*t-u*p,n[2]=l*c-u*y,n[3]=l*i-u*m,n[8]=l*M+u*a,n[9]=l*p+u*t,n[10]=l*y+u*c,n[11]=l*m+u*i,e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function ye(e,r){r=r||new o(16);var n=Math.cos(e),a=Math.sin(e);return r[0]=n,r[1]=a,r[2]=0,r[3]=0,r[4]=-a,r[5]=n,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Re(e,r,n){n=n||new o(16);var a=e[0*4+0],t=e[0*4+1],c=e[0*4+2],i=e[0*4+3],M=e[1*4+0],p=e[1*4+1],y=e[1*4+2],m=e[1*4+3],l=Math.cos(r),u=Math.sin(r);return n[0]=l*a+u*M,n[1]=l*t+u*p,n[2]=l*c+u*y,n[3]=l*i+u*m,n[4]=l*M-u*a,n[5]=l*p-u*t,n[6]=l*y-u*c,n[7]=l*m-u*i,e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function ve(e,r,n){n=n||new o(16);var a=e[0],t=e[1],c=e[2],i=Math.sqrt(a*a+t*t+c*c);a/=i,t/=i,c/=i;var M=a*a,p=t*t,y=c*c,m=Math.cos(r),l=Math.sin(r),u=1-m;return n[0]=M+(1-M)*m,n[1]=a*t*u+c*l,n[2]=a*c*u-t*l,n[3]=0,n[4]=a*t*u-c*l,n[5]=p+(1-p)*m,n[6]=t*c*u+a*l,n[7]=0,n[8]=a*c*u+t*l,n[9]=t*c*u-a*l,n[10]=y+(1-y)*m,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Ie(e,r,n,a){a=a||new o(16);var t=r[0],c=r[1],i=r[2],M=Math.sqrt(t*t+c*c+i*i);t/=M,c/=M,i/=M;var p=t*t,y=c*c,m=i*i,l=Math.cos(n),u=Math.sin(n),b=1-l,L=p+(1-p)*l,D=t*c*b+i*u,P=t*i*b-c*u,B=t*c*b-i*u,I=y+(1-y)*l,F=c*i*b+t*u,C=t*i*b+c*u,V=c*i*b-t*u,X=m+(1-m)*l,q=e[0],G=e[1],Y=e[2],H=e[3],k=e[4],W=e[5],K=e[6],J=e[7],Q=e[8],$=e[9],re=e[10],ne=e[11];return a[0]=L*q+D*k+P*Q,a[1]=L*G+D*W+P*$,a[2]=L*Y+D*K+P*re,a[3]=L*H+D*J+P*ne,a[4]=B*q+I*k+F*Q,a[5]=B*G+I*W+F*$,a[6]=B*Y+I*K+F*re,a[7]=B*H+I*J+F*ne,a[8]=C*q+V*k+X*Q,a[9]=C*G+V*W+X*$,a[10]=C*Y+V*K+X*re,a[11]=C*H+V*J+X*ne,e!==a&&(a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a}function Fe(e,r,n,a){return a=a||new o(16),a[0]=e,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=r,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=n,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Ve(e,r,n,a,t){return t=t||new o(16),t[0]=r*e[0*4+0],t[1]=r*e[0*4+1],t[2]=r*e[0*4+2],t[3]=r*e[0*4+3],t[4]=n*e[1*4+0],t[5]=n*e[1*4+1],t[6]=n*e[1*4+2],t[7]=n*e[1*4+3],t[8]=a*e[2*4+0],t[9]=a*e[2*4+1],t[10]=a*e[2*4+2],t[11]=a*e[2*4+3],e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t}function Xe(e,r,n,a){a=a||new o(16);const t=r[0],c=r[1],i=r[2],M=r[3],p=t+t,y=c+c,m=i+i,l=t*p,u=t*y,b=t*m,L=c*y,D=c*m,P=i*m,B=M*p,I=M*y,F=M*m,C=n[0],V=n[1],X=n[2];return a[0]=(1-(L+P))*C,a[1]=(u+F)*C,a[2]=(b-I)*C,a[3]=0,a[4]=(u-F)*V,a[5]=(1-(l+P))*V,a[6]=(D+B)*V,a[7]=0,a[8]=(b+I)*X,a[9]=(D-B)*X,a[10]=(1-(l+L))*X,a[11]=0,a[12]=e[0],a[13]=e[1],a[14]=e[2],a[15]=1,a}function Oe(e,r){const n=e[0],a=e[4],t=e[8],c=e[1],i=e[5],M=e[9],p=e[2],y=e[6],m=e[10],l=n+i+m;if(l>0){const u=.5/Math.sqrt(l+1);r[3]=.25/u,r[0]=(y-M)*u,r[1]=(t-p)*u,r[2]=(c-a)*u}else if(n>i&&n>m){const u=2*Math.sqrt(1+n-i-m);r[3]=(y-M)/u,r[0]=.25*u,r[1]=(a+c)/u,r[2]=(t+p)/u}else if(i>m){const u=2*Math.sqrt(1+i-n-m);r[3]=(t-p)/u,r[0]=(a+c)/u,r[1]=.25*u,r[2]=(M+y)/u}else{const u=2*Math.sqrt(1+m-n-i);r[3]=(c-a)/u,r[0]=(t+p)/u,r[1]=(M+y)/u,r[2]=.25*u}}function v(e,r,n,a){let t=m4.length(e.slice(0,3));const c=m4.length(e.slice(4,7)),i=m4.length(e.slice(8,11));x(e)<0&&(t=-t),r[0]=e[12],r[1]=e[13],r[2]=e[14];const p=m4.copy(e),y=1/t,m=1/c,l=1/i;p[0]*=y,p[1]*=y,p[2]*=y,p[4]*=m,p[5]*=m,p[6]*=m,p[8]*=l,p[9]*=l,p[10]*=l,Oe(p,n),a[0]=t,a[1]=c,a[2]=i}function x(e){var r=e[0],n=e[0*4+1],a=e[0*4+2],t=e[0*4+3],c=e[1*4+0],i=e[1*4+1],M=e[1*4+2],p=e[1*4+3],y=e[2*4+0],m=e[2*4+1],l=e[2*4+2],u=e[2*4+3],b=e[3*4+0],L=e[3*4+1],D=e[3*4+2],P=e[3*4+3],B=l*P,I=D*u,F=M*P,C=D*p,V=M*u,X=l*p,q=a*P,G=D*t,Y=a*u,H=l*t,k=a*p,W=M*t,K=B*i+C*m+V*L-(I*i+F*m+X*L),J=I*n+q*m+H*L-(B*n+G*m+Y*L),Q=F*n+G*i+k*L-(C*n+q*i+W*L),$=X*n+Y*i+W*m-(V*n+H*i+k*m);return 1/(r*K+c*J+y*Q+b*$)}function E(e,r){r=r||new o(16);var n=e[0*4+0],a=e[0*4+1],t=e[0*4+2],c=e[0*4+3],i=e[1*4+0],M=e[1*4+1],p=e[1*4+2],y=e[1*4+3],m=e[2*4+0],l=e[2*4+1],u=e[2*4+2],b=e[2*4+3],L=e[3*4+0],D=e[3*4+1],P=e[3*4+2],B=e[3*4+3],I=u*B,F=P*b,C=p*B,V=P*y,X=p*b,q=u*y,G=t*B,Y=P*c,H=t*b,k=u*c,W=t*y,K=p*c,J=m*D,Q=L*l,$=i*D,re=L*M,ne=i*l,ge=m*M,we=n*D,Ae=L*a,Le=n*l,be=m*a,De=n*M,Pe=i*a,Ye=I*M+V*l+X*D-(F*M+C*l+q*D),He=F*a+G*l+k*D-(I*a+Y*l+H*D),ke=C*a+Y*M+W*D-(V*a+G*M+K*D),We=q*a+H*M+K*l-(X*a+k*M+W*l),j=1/(n*Ye+i*He+m*ke+L*We);return r[0]=j*Ye,r[1]=j*He,r[2]=j*ke,r[3]=j*We,r[4]=j*(F*i+C*m+q*L-(I*i+V*m+X*L)),r[5]=j*(I*n+Y*m+H*L-(F*n+G*m+k*L)),r[6]=j*(V*n+G*i+K*L-(C*n+Y*i+W*L)),r[7]=j*(X*n+k*i+W*m-(q*n+H*i+K*m)),r[8]=j*(J*y+re*b+ne*B-(Q*y+$*b+ge*B)),r[9]=j*(Q*c+we*b+be*B-(J*c+Ae*b+Le*B)),r[10]=j*($*c+Ae*y+De*B-(re*c+we*y+Pe*B)),r[11]=j*(ge*c+Le*y+Pe*b-(ne*c+be*y+De*b)),r[12]=j*($*u+ge*P+Q*p-(ne*P+J*p+re*u)),r[13]=j*(Le*P+J*t+Ae*u-(we*u+be*P+Q*t)),r[14]=j*(we*p+Pe*P+re*t-(De*P+$*t+Ae*p)),r[15]=j*(De*u+ne*t+be*p-(Le*p+Pe*u+ge*t)),r}function U(e,r,n){n=n||new o(4);for(var a=0;a<4;++a){n[a]=0;for(var t=0;t<4;++t)n[a]+=r[t]*e[t*4+a]}return n}function O(e,r,n){n=n||new o(3);var a=r[0],t=r[1],c=r[2],i=a*e[0*4+3]+t*e[1*4+3]+c*e[2*4+3]+e[3*4+3];return n[0]=(a*e[0*4+0]+t*e[1*4+0]+c*e[2*4+0]+e[3*4+0])/i,n[1]=(a*e[0*4+1]+t*e[1*4+1]+c*e[2*4+1]+e[3*4+1])/i,n[2]=(a*e[0*4+2]+t*e[1*4+2]+c*e[2*4+2]+e[3*4+2])/i,n}function z(e,r,n){n=n||new o(3);var a=r[0],t=r[1],c=r[2];return n[0]=a*e[0*4+0]+t*e[1*4+0]+c*e[2*4+0],n[1]=a*e[0*4+1]+t*e[1*4+1]+c*e[2*4+1],n[2]=a*e[0*4+2]+t*e[1*4+2]+c*e[2*4+2],n}function ee(e,r,n){n=n||new o(3);var a=E(e),t=r[0],c=r[1],i=r[2];return n[0]=t*a[0*4+0]+c*a[0*4+1]+i*a[0*4+2],n[1]=t*a[1*4+0]+c*a[1*4+1]+i*a[1*4+2],n[2]=t*a[2*4+0]+c*a[2*4+1]+i*a[2*4+2],n}function pe(e,r){return r=r||new o(16),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}return{copy:pe,lookAt:ae,addVectors:A,subtractVectors:g,scaleVector:R,distance:ie,distanceSq:s,normalize:_,compose:Xe,cross:S,decompose:v,dot:oe,identity:fe,transpose:d,length:w,lengthSq:Z,orthographic:Me,frustum:xe,perspective:ce,translation:Ee,translate:me,xRotation:le,yRotation:ue,zRotation:ye,xRotate:Te,yRotate:he,zRotate:Re,axisRotation:ve,axisRotate:Ie,scaling:Fe,scale:Ve,multiply:T,inverse:E,transformVector:U,transformPoint:O,transformDirection:z,transformNormal:ee,setDefaultType:h}});var cr=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif

varying vec2 vTextureCoords;
uniform sampler2D textureUnit;

void main() {
    vec4 texture = texture2D(textureUnit, vTextureCoords);
    gl_FragColor = texture;
}`,ur=`attribute vec3 vertex;
attribute vec2 textureCoords;
uniform mat4 ModelViewMatrix, ProjectionMatrix;
varying vec2 vTextureCoords;

void main() {
    vec4 vertPos4 = ModelViewMatrix * vec4(vertex, 1.0);
    vec3 vertPos = vec3(vertPos4) / vertPos4.w;
    gl_Position = ProjectionMatrix*vertPos4;
    vTextureCoords = textureCoords;
}`,Be=!1;function vr(o,h,T,A,g){var R=new Array(3),_=new Array(3),w=new Array(3),Z,S;this.setView=function(v,x,E){w=x===void 0?[0,0,10]:x,E=E===void 0?[0,1,0]:E,Z=v,ve(w,w),Ie(_,w),Xe(_,_,ye(w,E)),Ve(_,E,_),ve(_,_),Oe(R,_,w)},this.getViewMatrix=function(){var v=[R[0],_[0],w[0],0,R[1],_[1],w[1],0,R[2],_[2],w[2],0,0,0,0,1];if(S!==void 0){var x=S[0]-v[0]*S[0]-v[4]*S[1]-v[8]*S[2],E=S[1]-v[1]*S[0]-v[5]*S[1]-v[9]*S[2],U=S[2]-v[2]*S[0]-v[6]*S[1]-v[10]*S[2];v[12]=x,v[13]=E,v[14]=U}return Z!==void 0&&(v[14]-=Z),v},this.getViewDistance=function(){return Z},this.setViewDistance=function(v){Z=v},this.getRotationCenter=function(){return S===void 0?[0,0,0]:S},this.setRotationCenter=function(v){S=v},this.setView(T,A,g),o.addEventListener("mousedown",Me,!1),o.addEventListener("touchstart",me,!1);function oe(v,x){function E(z,ee,pe){var e=2*(z[0]*ee[0]+z[1]*ee[1]+z[2]*ee[2]);pe[0]=e*z[0]-ee[0],pe[1]=e*z[1]-ee[1],pe[2]=e*z[2]-ee[2]}ve(v,v),ve(x,x);var U=[0,0,0];Fe(U,v,x),ve(U,U);var O=[0,0,0];E(U,w,O),E(v,O,w),E(U,R,O),E(v,O,R),E(U,_,O),E(v,O,_)}var s,ie,fe,d,ae,ce=!1;function Me(v){if(!ce){ce=!0,s=o.width/2,ie=o.height/2;var x=Math.min(s,ie);fe=x*x,document.addEventListener("mousemove",xe,!1),document.addEventListener("mouseup",Ee,!1);var E=o.getBoundingClientRect();d=v.clientX-E.left,ae=v.clientY-E.top}}function xe(v){if(!!ce){var x=o.getBoundingClientRect(),E=v.clientX-x.left,U=v.clientY-x.top,O=he(d,ae),z=he(E,U);oe(O,z),d=E,ae=U,h&&h()}}function Ee(v){ce&&(document.removeEventListener("mousemove",xe,!1),document.removeEventListener("mouseup",Ee,!1),ce=!1)}function me(v){if(v.touches.length!=1){ue();return}v.preventDefault();var x=o.getBoundingClientRect();d=v.touches[0].clientX-x.left,ae=v.touches[0].clientY-x.top,o.addEventListener("touchmove",le,!1),o.addEventListener("touchend",Te,!1),o.addEventListener("touchcancel",ue,!1),Be=!0,s=o.width/2,ie=o.height/2;var E=Math.min(s,ie);fe=E*E}function le(v){if(v.touches.length!=1||!Be){ue();return}v.preventDefault();var x=o.getBoundingClientRect(),E=v.touches[0].clientX-x.left,U=v.touches[0].clientY-x.top,O=he(d,ae),z=he(E,U);oe(O,z),d=E,ae=U,h&&h()}function Te(v){ue()}function ue(){Be&&(Be=!1,o.removeEventListener("touchmove",le,!1),o.removeEventListener("touchend",Te,!1),o.removeEventListener("touchcancel",ue,!1))}function he(v,x){var E=v-s,U=ie-x,O=E*R[0]+U*_[0],z=E*R[1]+U*_[1],ee=E*R[2]+U*_[2],pe=O*O+z*z+ee*ee;if(pe>fe)return[O,z,ee];var e=Math.sqrt(fe-pe);return[O+e*w[0],z+e*w[1],ee+e*w[2]]}function ye(v,x){return v[0]*x[0]+v[1]*x[1]+v[2]*x[2]}function Re(v){return Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2])}function ve(v,x){var E=Re(x);v[0]=x[0]/E,v[1]=x[1]/E,v[2]=x[2]/E}function Ie(v,x){v[0]=x[0],v[1]=x[1],v[2]=x[2]}function Fe(v,x,E){v[0]=x[0]+E[0],v[1]=x[1]+E[1],v[2]=x[2]+E[2]}function Ve(v,x,E){v[0]=x[0]-E[0],v[1]=x[1]-E[1],v[2]=x[2]-E[2]}function Xe(v,x,E){v[0]=x[0]*E,v[1]=x[1]*E,v[2]=x[2]*E}function Oe(v,x,E){var U=x[1]*E[2]-x[2]*E[1],O=x[2]*E[0]-x[0]*E[2],z=x[0]*E[1]-x[1]*E[0];v[0]=U,v[1]=O,v[2]=z}}const de=[{id:"eyeSeparation",label:"Eye Separation",min:0,max:10,step:.01,value:2,elementRef:null},{id:"fov",label:"Field of View",min:.5,max:3,step:.01,value:1.45,elementRef:null},{id:"nearClippingDistance",label:"Near Clipping Distance",min:1,max:20,step:.5,value:10,elementRef:null},{id:"convergenceDistance",label:"Convergence distance",min:1,max:100,step:1,value:40,elementRef:null}],fr=o=>{const h=document.querySelector(o);h.innerHTML="",de.forEach(T=>{const A=document.createElement("div"),g=document.createElement("div");g.classList.add("title-wrapper");const R=document.createElement("label");R.setAttribute("for",T.id),R.innerHTML=T.label;const _=document.createElement("span");_.setAttribute("class","slider-value"),_.innerHTML=T.value;const w=document.createElement("input");w.setAttribute("id",T.id),w.setAttribute("type","range"),w.setAttribute("min",T.min),w.setAttribute("max",T.max),w.setAttribute("step",T.step),w.setAttribute("value",T.value),w.addEventListener("input",Z=>{_.innerHTML=Z.target.value}),T.elementRef=w,A.appendChild(g),g.appendChild(R),g.appendChild(_),A.appendChild(w),h.appendChild(A)})},Se=o=>{var T;const h=de.find(A=>A.id===o);return parseFloat((T=h==null?void 0:h.elementRef)==null?void 0:T.value,10)},lr=()=>new Promise(async(o,h)=>{try{const T=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});o(T)}catch(T){h(T)}}),hr=()=>document.getElementById("webcam").checked,pr=o=>{const h=document.getElementById("webcam");h.addEventListener("change",async T=>{h.checked?o.srcObject=await lr():o.srcObject=null})},mr=o=>{const h=o.createTexture();return o.bindTexture(o.TEXTURE_2D,h),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),h};let _e=null;const te={alpha:0,beta:0,gamma:0,event:null},je=async()=>{if(!(typeof DeviceOrientationEvent>"u"||typeof DeviceOrientationEvent.requestPermission!="function"))try{await DeviceOrientationEvent.requestPermission()==="granted"&&(console.log("Permission granted"),window.removeEventListener("deviceorientation",_e,!0),_e=h=>{te.alpha=h.alpha,te.beta=h.beta,te.gamma=h.gamma,te.event=h},window.addEventListener("deviceorientation",_e,!0))}catch{console.error("No device orientation permission")}},xr=async()=>{const o=document.getElementById("device-orientation");o.checked?je().catch(console.error):window.removeEventListener("deviceorientation",_e,!0),o.addEventListener("change",async h=>{o.checked?je().catch(console.error):window.removeEventListener("deviceorientation",_e,!0)})};let f,Ue,ze,N,er,Ne,rr,Ce,nr;function Ze(o){this.name=o,this.iVertexBuffer=f.createBuffer(),this.iTextureBuffer=f.createBuffer(),this.count=0,this.BufferData=function(h,T){f.bindBuffer(f.ARRAY_BUFFER,this.iVertexBuffer),f.bufferData(f.ARRAY_BUFFER,new Float32Array(h),f.STREAM_DRAW),f.bindBuffer(f.ARRAY_BUFFER,this.iTextureBuffer),f.bufferData(f.ARRAY_BUFFER,new Float32Array(T),f.STREAM_DRAW),f.enableVertexAttribArray(N.iTextureCoords),f.vertexAttribPointer(N.iTextureCoords,2,f.FLOAT,!1,0,0),this.count=h.length/3},this.Draw=function(){f.bindBuffer(f.ARRAY_BUFFER,this.iVertexBuffer),f.vertexAttribPointer(N.iAttribVertex,3,f.FLOAT,!1,0,0),f.enableVertexAttribArray(N.iAttribVertex),f.bindBuffer(f.ARRAY_BUFFER,this.iTextureBuffer),f.vertexAttribPointer(N.iTextureCoords,2,f.FLOAT,!1,0,0),f.enableVertexAttribArray(N.iTextureCoords),f.drawArrays(f.TRIANGLE_STRIP,0,this.count)}}function Er(o,h){this.name=o,this.prog=h,this.iAttribVertex=-1,this.iTextureCoords=-1,this.iTextureUnit=-1,this.Use=function(){f.useProgram(this.prog)}}function ar(){f.clearColor(0,0,0,1),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT);const o=Se("eyeSeparation"),h=Se("fov"),T=Se("nearClippingDistance"),A=Se("convergenceDistance"),g=2e3;let R,_,w,Z;w=T*Math.tan(h/2),Z=-w;const S=Math.tan(h/2)*A,oe=S-o/2,s=S+o/2;R=-oe*T/A,_=s*T/A;const ie=m4.orthographic(R,_,Z,w,T,g);R=-s*T/A,_=oe*T/A;const fe=m4.orthographic(R,_,Z,w,T,g);let d;if(nr.checked&&te.alpha&&te.beta&&te.gamma){const me=te.alpha*(Math.PI/180),le=te.beta*(Math.PI/180),Te=te.gamma*(Math.PI/180),ue=m4.axisRotation([0,0,1],me),he=m4.axisRotation([1,0,0],-le),ye=m4.axisRotation([0,1,0],Te),Re=m4.multiply(m4.multiply(he,ye),ue),ve=m4.translation(0,0,-2);d=m4.multiply(Re,ve)}else d=er.getViewMatrix();const ae=m4.axisRotation([.707,.707,0],0),ce=m4.translation(-.01,0,-20),Me=m4.translation(.01,0,-20);if(hr()){const me=m4.orthographic(0,1,0,1,-1,1),le=m4.multiply(ae,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);f.uniformMatrix4fv(N.iModelViewMatrix,!1,le),f.uniformMatrix4fv(N.iProjectionMatrix,!1,me),f.bindTexture(f.TEXTURE_2D,rr),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,Ce),ze.Draw()}f.bindTexture(f.TEXTURE_2D,Ne),f.clear(f.DEPTH_BUFFER_BIT);const xe=m4.multiply(ce,d);f.uniformMatrix4fv(N.iModelViewMatrix,!1,xe),f.uniformMatrix4fv(N.iProjectionMatrix,!1,ie),f.colorMask(!0,!1,!1,!1),Ue.Draw(),f.clear(f.DEPTH_BUFFER_BIT);const Ee=m4.multiply(Me,d);f.uniformMatrix4fv(N.iModelViewMatrix,!1,Ee),f.uniformMatrix4fv(N.iProjectionMatrix,!1,fe),f.colorMask(!1,!0,!0,!1),Ue.Draw(),f.colorMask(!0,!0,!0,!0)}let Ge=1;function Tr(o,h){return o*Math.cos(h)/Ge}function Mr(o,h){return o*Math.sin(h)/Ge}function yr(o,h,T,A,g,R,_){let w=A*Math.PI/T;return g*Math.pow(Math.E,-R*o)*Math.sin(w*o+_)/Ge}let qe=6,Ke=6,Je=4,Qe=.5,$e=0;const tr=qe,or=2*Math.PI,Rr=(o,h)=>[o/or,h/tr],se=(o,h,T,A,g,R,_,w,Z)=>{const S=Tr(o,h),oe=Mr(o,h),s=yr(o,h,T,A,g,R,_);w.push(S,oe,s),Z.push(...Rr(h,o))};function _r(){const o=[],h=[];for(let T=0;T<=tr;T+=.001)for(let A=0;A<or;A+=.5)se(T,A,qe,Ke,Je,Qe,$e,o,h),se(T+.5,A+.5,qe,Ke,Je,Qe,$e,o,h);return{vertexList:o,textureList:h}}function gr(){let o=wr(f,ur,cr);N=new Er("Basic",o),N.Use(),N.iAttribVertex=f.getAttribLocation(o,"vertex"),N.iModelViewMatrix=f.getUniformLocation(o,"ModelViewMatrix"),N.iProjectionMatrix=f.getUniformLocation(o,"ProjectionMatrix"),N.iTextureCoords=f.getAttribLocation(o,"textureCoords"),N.iTextureUnit=f.getUniformLocation(o,"textureUnit"),Ue=new Ze("Surface");const{vertexList:h,textureList:T}=_r();Ue.BufferData(h,T),ze=new Ze("Background"),ze.BufferData([0,0,0,1,0,0,1,1,0,1,1,0,0,1,0,0,0,0],[1,1,0,1,0,0,0,0,1,0,1,1]),Dr(),f.enable(f.DEPTH_TEST)}function ir(){ar(),window.requestAnimationFrame(ir)}function wr(o,h,T){let A=o.createShader(o.VERTEX_SHADER);if(o.shaderSource(A,h),o.compileShader(A),!o.getShaderParameter(A,o.COMPILE_STATUS))throw new Error("Error in vertex shader:  "+o.getShaderInfoLog(A));let g=o.createShader(o.FRAGMENT_SHADER);if(o.shaderSource(g,T),o.compileShader(g),!o.getShaderParameter(g,o.COMPILE_STATUS))throw new Error("Error in fragment shader:  "+o.getShaderInfoLog(g));let R=o.createProgram();if(o.attachShader(R,A),o.attachShader(R,g),o.linkProgram(R),!o.getProgramParameter(R,o.LINK_STATUS))throw new Error("Link error in program:  "+o.getProgramInfoLog(R));return R}const Ar=()=>{document.getElementById("request-orientation").addEventListener("click",()=>{xr()})};async function Lr(){fr("#controls");let o;try{if(o=document.getElementById("webglcanvas"),f=o.getContext("webgl"),Ce=document.createElement("video"),Ce.setAttribute("autoplay","true"),nr=document.getElementById("device-orientation"),rr=mr(f),pr(Ce),Ar(),!f)throw"Browser does not support WebGL"}catch{document.getElementById("canvas-holder").innerHTML="<p>Sorry, could not get a WebGL graphics context.</p>";return}try{gr()}catch(h){document.getElementById("canvas-holder").innerHTML="<p>Sorry, could not initialize the WebGL graphics context: "+h+"</p>";return}er=new vr(o,ar,0),ir()}async function br(){return new Promise((o,h)=>{const T=new Image;T.src="texture.png",T.crossOrigin="anonymous",T.addEventListener("load",function(){o(T)})})}const Dr=async()=>{const o=await br();Ne=f.createTexture(),f.bindTexture(f.TEXTURE_2D,Ne),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,o)};document.addEventListener("DOMContentLoaded",Lr);
