(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))g(A);new MutationObserver(A=>{for(const R of A)if(R.type==="childList")for(const y of R.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&g(y)}).observe(document,{childList:!0,subtree:!0});function T(A){const R={};return A.integrity&&(R.integrity=A.integrity),A.referrerpolicy&&(R.referrerPolicy=A.referrerpolicy),A.crossorigin==="use-credentials"?R.credentials="include":A.crossorigin==="anonymous"?R.credentials="omit":R.credentials="same-origin",R}function g(A){if(A.ep)return;A.ep=!0;const R=T(A);fetch(A.href,R)}})();(function(t,h){typeof define=="function"&&define.amd?define([],h):window.m4=h()})(globalThis,function(){let t=Float32Array;function h(e){const r=t;return t=e,r}function T(e,r,n){n=n||new t(16);var a=r[0*4+0],o=r[0*4+1],c=r[0*4+2],i=r[0*4+3],M=r[1*4+0],p=r[1*4+1],_=r[1*4+2],m=r[1*4+3],l=r[2*4+0],u=r[2*4+1],b=r[2*4+2],L=r[2*4+3],D=r[3*4+0],S=r[3*4+1],P=r[3*4+2],F=r[3*4+3],I=e[0*4+0],C=e[0*4+1],V=e[0*4+2],X=e[0*4+3],O=e[1*4+0],q=e[1*4+1],Y=e[1*4+2],H=e[1*4+3],W=e[2*4+0],j=e[2*4+1],K=e[2*4+2],J=e[2*4+3],Q=e[3*4+0],$=e[3*4+1],ee=e[3*4+2],re=e[3*4+3];return n[0]=a*I+o*O+c*W+i*Q,n[1]=a*C+o*q+c*j+i*$,n[2]=a*V+o*Y+c*K+i*ee,n[3]=a*X+o*H+c*J+i*re,n[4]=M*I+p*O+_*W+m*Q,n[5]=M*C+p*q+_*j+m*$,n[6]=M*V+p*Y+_*K+m*ee,n[7]=M*X+p*H+_*J+m*re,n[8]=l*I+u*O+b*W+L*Q,n[9]=l*C+u*q+b*j+L*$,n[10]=l*V+u*Y+b*K+L*ee,n[11]=l*X+u*H+b*J+L*re,n[12]=D*I+S*O+P*W+F*Q,n[13]=D*C+S*q+P*j+F*$,n[14]=D*V+S*Y+P*K+F*ee,n[15]=D*X+S*H+P*J+F*re,n}function g(e,r,n){return n=n||new t(3),n[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n}function A(e,r,n){return n=n||new t(3),n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],n}function R(e,r,n){return n=n||new t(3),n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n}function y(e,r){r=r||new t(3);var n=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return n>1e-5&&(r[0]=e[0]/n,r[1]=e[1]/n,r[2]=e[2]/n),r}function w(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function Z(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function B(e,r,n){return n=n||new t(3),n[0]=e[1]*r[2]-e[2]*r[1],n[1]=e[2]*r[0]-e[0]*r[2],n[2]=e[0]*r[1]-e[1]*r[0],n}function oe(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}function s(e,r){const n=e[0]-r[0],a=e[1]-r[1],o=e[2]-r[2];return n*n+a*a+o*o}function te(e,r){return Math.sqrt(s(e,r))}function ce(e){return e=e||new t(16),e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ae(e,r){return r=r||new t(16),r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15],r}function ne(e,r,n,a){a=a||new t(16);var o=y(A(e,r)),c=y(B(n,o)),i=y(B(o,c));return a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=0,a[4]=i[0],a[5]=i[1],a[6]=i[2],a[7]=0,a[8]=o[0],a[9]=o[1],a[10]=o[2],a[11]=0,a[12]=e[0],a[13]=e[1],a[14]=e[2],a[15]=1,a}function ie(e,r,n,a,o){o=o||new t(16);var c=Math.tan(Math.PI*.5-.5*e),i=1/(n-a);return o[0]=c/r,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=c,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(n+a)*i,o[11]=-1,o[12]=0,o[13]=0,o[14]=n*a*i*2,o[15]=0,o}function Ee(e,r,n,a,o,c,i){return i=i||new t(16),i[0]=2/(r-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(a-n),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(o-c),i[11]=0,i[12]=(e+r)/(e-r),i[13]=(n+a)/(n-a),i[14]=(o+c)/(o-c),i[15]=1,i}function ve(e,r,n,a,o,c,i){i=i||new t(16);var M=r-e,p=a-n,_=c-o;return i[0]=2*o/M,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*o/p,i[6]=0,i[7]=0,i[8]=(e+r)/M,i[9]=(a+n)/p,i[10]=-(c+o)/_,i[11]=-1,i[12]=0,i[13]=0,i[14]=-2*o*c/_,i[15]=0,i}function he(e,r,n,a){return a=a||new t(16),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=e,a[13]=r,a[14]=n,a[15]=1,a}function Te(e,r,n,a,o){o=o||new t(16);var c=e[0],i=e[1],M=e[2],p=e[3],_=e[1*4+0],m=e[1*4+1],l=e[1*4+2],u=e[1*4+3],b=e[2*4+0],L=e[2*4+1],D=e[2*4+2],S=e[2*4+3],P=e[3*4+0],F=e[3*4+1],I=e[3*4+2],C=e[3*4+3];return e!==o&&(o[0]=c,o[1]=i,o[2]=M,o[3]=p,o[4]=_,o[5]=m,o[6]=l,o[7]=u,o[8]=b,o[9]=L,o[10]=D,o[11]=S),o[12]=c*r+_*n+b*a+P,o[13]=i*r+m*n+L*a+F,o[14]=M*r+l*n+D*a+I,o[15]=p*r+u*n+S*a+C,o}function pe(e,r){r=r||new t(16);var n=Math.cos(e),a=Math.sin(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=a,r[7]=0,r[8]=0,r[9]=-a,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function me(e,r,n){n=n||new t(16);var a=e[4],o=e[5],c=e[6],i=e[7],M=e[8],p=e[9],_=e[10],m=e[11],l=Math.cos(r),u=Math.sin(r);return n[4]=l*a+u*M,n[5]=l*o+u*p,n[6]=l*c+u*_,n[7]=l*i+u*m,n[8]=l*M-u*a,n[9]=l*p-u*o,n[10]=l*_-u*c,n[11]=l*m-u*i,e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function fe(e,r){r=r||new t(16);var n=Math.cos(e),a=Math.sin(e);return r[0]=n,r[1]=0,r[2]=-a,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=a,r[9]=0,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function xe(e,r,n){n=n||new t(16);var a=e[0*4+0],o=e[0*4+1],c=e[0*4+2],i=e[0*4+3],M=e[2*4+0],p=e[2*4+1],_=e[2*4+2],m=e[2*4+3],l=Math.cos(r),u=Math.sin(r);return n[0]=l*a-u*M,n[1]=l*o-u*p,n[2]=l*c-u*_,n[3]=l*i-u*m,n[8]=l*M+u*a,n[9]=l*p+u*o,n[10]=l*_+u*c,n[11]=l*m+u*i,e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function Se(e,r){r=r||new t(16);var n=Math.cos(e),a=Math.sin(e);return r[0]=n,r[1]=a,r[2]=0,r[3]=0,r[4]=-a,r[5]=n,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Pe(e,r,n){n=n||new t(16);var a=e[0*4+0],o=e[0*4+1],c=e[0*4+2],i=e[0*4+3],M=e[1*4+0],p=e[1*4+1],_=e[1*4+2],m=e[1*4+3],l=Math.cos(r),u=Math.sin(r);return n[0]=l*a+u*M,n[1]=l*o+u*p,n[2]=l*c+u*_,n[3]=l*i+u*m,n[4]=l*M-u*a,n[5]=l*p-u*o,n[6]=l*_-u*c,n[7]=l*m-u*i,e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n}function le(e,r,n){n=n||new t(16);var a=e[0],o=e[1],c=e[2],i=Math.sqrt(a*a+o*o+c*c);a/=i,o/=i,c/=i;var M=a*a,p=o*o,_=c*c,m=Math.cos(r),l=Math.sin(r),u=1-m;return n[0]=M+(1-M)*m,n[1]=a*o*u+c*l,n[2]=a*c*u-o*l,n[3]=0,n[4]=a*o*u-c*l,n[5]=p+(1-p)*m,n[6]=o*c*u+a*l,n[7]=0,n[8]=a*c*u+o*l,n[9]=o*c*u-a*l,n[10]=_+(1-_)*m,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Be(e,r,n,a){a=a||new t(16);var o=r[0],c=r[1],i=r[2],M=Math.sqrt(o*o+c*c+i*i);o/=M,c/=M,i/=M;var p=o*o,_=c*c,m=i*i,l=Math.cos(n),u=Math.sin(n),b=1-l,L=p+(1-p)*l,D=o*c*b+i*u,S=o*i*b-c*u,P=o*c*b-i*u,F=_+(1-_)*l,I=c*i*b+o*u,C=o*i*b+c*u,V=c*i*b-o*u,X=m+(1-m)*l,O=e[0],q=e[1],Y=e[2],H=e[3],W=e[4],j=e[5],K=e[6],J=e[7],Q=e[8],$=e[9],ee=e[10],re=e[11];return a[0]=L*O+D*W+S*Q,a[1]=L*q+D*j+S*$,a[2]=L*Y+D*K+S*ee,a[3]=L*H+D*J+S*re,a[4]=P*O+F*W+I*Q,a[5]=P*q+F*j+I*$,a[6]=P*Y+F*K+I*ee,a[7]=P*H+F*J+I*re,a[8]=C*O+V*W+X*Q,a[9]=C*q+V*j+X*$,a[10]=C*Y+V*K+X*ee,a[11]=C*H+V*J+X*re,e!==a&&(a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a}function Ce(e,r,n,a){return a=a||new t(16),a[0]=e,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=r,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=n,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Ue(e,r,n,a,o){return o=o||new t(16),o[0]=r*e[0*4+0],o[1]=r*e[0*4+1],o[2]=r*e[0*4+2],o[3]=r*e[0*4+3],o[4]=n*e[1*4+0],o[5]=n*e[1*4+1],o[6]=n*e[1*4+2],o[7]=n*e[1*4+3],o[8]=a*e[2*4+0],o[9]=a*e[2*4+1],o[10]=a*e[2*4+2],o[11]=a*e[2*4+3],e!==o&&(o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o}function Fe(e,r,n,a){a=a||new t(16);const o=r[0],c=r[1],i=r[2],M=r[3],p=o+o,_=c+c,m=i+i,l=o*p,u=o*_,b=o*m,L=c*_,D=c*m,S=i*m,P=M*p,F=M*_,I=M*m,C=n[0],V=n[1],X=n[2];return a[0]=(1-(L+S))*C,a[1]=(u+I)*C,a[2]=(b-F)*C,a[3]=0,a[4]=(u-I)*V,a[5]=(1-(l+S))*V,a[6]=(D+P)*V,a[7]=0,a[8]=(b+F)*X,a[9]=(D-P)*X,a[10]=(1-(l+L))*X,a[11]=0,a[12]=e[0],a[13]=e[1],a[14]=e[2],a[15]=1,a}function Ie(e,r){const n=e[0],a=e[4],o=e[8],c=e[1],i=e[5],M=e[9],p=e[2],_=e[6],m=e[10],l=n+i+m;if(l>0){const u=.5/Math.sqrt(l+1);r[3]=.25/u,r[0]=(_-M)*u,r[1]=(o-p)*u,r[2]=(c-a)*u}else if(n>i&&n>m){const u=2*Math.sqrt(1+n-i-m);r[3]=(_-M)/u,r[0]=.25*u,r[1]=(a+c)/u,r[2]=(o+p)/u}else if(i>m){const u=2*Math.sqrt(1+i-n-m);r[3]=(o-p)/u,r[0]=(a+c)/u,r[1]=.25*u,r[2]=(M+_)/u}else{const u=2*Math.sqrt(1+m-n-i);r[3]=(c-a)/u,r[0]=(o+p)/u,r[1]=(M+_)/u,r[2]=.25*u}}function v(e,r,n,a){let o=m4.length(e.slice(0,3));const c=m4.length(e.slice(4,7)),i=m4.length(e.slice(8,11));x(e)<0&&(o=-o),r[0]=e[12],r[1]=e[13],r[2]=e[14];const p=m4.copy(e),_=1/o,m=1/c,l=1/i;p[0]*=_,p[1]*=_,p[2]*=_,p[4]*=m,p[5]*=m,p[6]*=m,p[8]*=l,p[9]*=l,p[10]*=l,Ie(p,n),a[0]=o,a[1]=c,a[2]=i}function x(e){var r=e[0],n=e[0*4+1],a=e[0*4+2],o=e[0*4+3],c=e[1*4+0],i=e[1*4+1],M=e[1*4+2],p=e[1*4+3],_=e[2*4+0],m=e[2*4+1],l=e[2*4+2],u=e[2*4+3],b=e[3*4+0],L=e[3*4+1],D=e[3*4+2],S=e[3*4+3],P=l*S,F=D*u,I=M*S,C=D*p,V=M*u,X=l*p,O=a*S,q=D*o,Y=a*u,H=l*o,W=a*p,j=M*o,K=P*i+C*m+V*L-(F*i+I*m+X*L),J=F*n+O*m+H*L-(P*n+q*m+Y*L),Q=I*n+q*i+W*L-(C*n+O*i+j*L),$=X*n+Y*i+j*m-(V*n+H*i+W*m);return 1/(r*K+c*J+_*Q+b*$)}function E(e,r){r=r||new t(16);var n=e[0*4+0],a=e[0*4+1],o=e[0*4+2],c=e[0*4+3],i=e[1*4+0],M=e[1*4+1],p=e[1*4+2],_=e[1*4+3],m=e[2*4+0],l=e[2*4+1],u=e[2*4+2],b=e[2*4+3],L=e[3*4+0],D=e[3*4+1],S=e[3*4+2],P=e[3*4+3],F=u*P,I=S*b,C=p*P,V=S*_,X=p*b,O=u*_,q=o*P,Y=S*c,H=o*b,W=u*c,j=o*_,K=p*c,J=m*D,Q=L*l,$=i*D,ee=L*M,re=i*l,Me=m*M,_e=n*D,Re=L*a,ye=n*l,Ae=m*a,we=n*M,ge=i*a,Ge=F*M+V*l+X*D-(I*M+C*l+O*D),Oe=I*a+q*l+W*D-(F*a+Y*l+H*D),qe=C*a+Y*M+j*D-(V*a+q*M+K*D),Ye=O*a+H*M+K*l-(X*a+W*M+j*l),k=1/(n*Ge+i*Oe+m*qe+L*Ye);return r[0]=k*Ge,r[1]=k*Oe,r[2]=k*qe,r[3]=k*Ye,r[4]=k*(I*i+C*m+O*L-(F*i+V*m+X*L)),r[5]=k*(F*n+Y*m+H*L-(I*n+q*m+W*L)),r[6]=k*(V*n+q*i+K*L-(C*n+Y*i+j*L)),r[7]=k*(X*n+W*i+j*m-(O*n+H*i+K*m)),r[8]=k*(J*_+ee*b+re*P-(Q*_+$*b+Me*P)),r[9]=k*(Q*c+_e*b+Ae*P-(J*c+Re*b+ye*P)),r[10]=k*($*c+Re*_+we*P-(ee*c+_e*_+ge*P)),r[11]=k*(Me*c+ye*_+ge*b-(re*c+Ae*_+we*b)),r[12]=k*($*u+Me*S+Q*p-(re*S+J*p+ee*u)),r[13]=k*(ye*S+J*o+Re*u-(_e*u+Ae*S+Q*o)),r[14]=k*(_e*p+ge*S+ee*o-(we*S+$*o+Re*p)),r[15]=k*(we*u+re*o+Ae*p-(ye*p+ge*u+Me*o)),r}function U(e,r,n){n=n||new t(4);for(var a=0;a<4;++a){n[a]=0;for(var o=0;o<4;++o)n[a]+=r[o]*e[o*4+a]}return n}function z(e,r,n){n=n||new t(3);var a=r[0],o=r[1],c=r[2],i=a*e[0*4+3]+o*e[1*4+3]+c*e[2*4+3]+e[3*4+3];return n[0]=(a*e[0*4+0]+o*e[1*4+0]+c*e[2*4+0]+e[3*4+0])/i,n[1]=(a*e[0*4+1]+o*e[1*4+1]+c*e[2*4+1]+e[3*4+1])/i,n[2]=(a*e[0*4+2]+o*e[1*4+2]+c*e[2*4+2]+e[3*4+2])/i,n}function N(e,r,n){n=n||new t(3);var a=r[0],o=r[1],c=r[2];return n[0]=a*e[0*4+0]+o*e[1*4+0]+c*e[2*4+0],n[1]=a*e[0*4+1]+o*e[1*4+1]+c*e[2*4+1],n[2]=a*e[0*4+2]+o*e[1*4+2]+c*e[2*4+2],n}function d(e,r,n){n=n||new t(3);var a=E(e),o=r[0],c=r[1],i=r[2];return n[0]=o*a[0*4+0]+c*a[0*4+1]+i*a[0*4+2],n[1]=o*a[1*4+0]+c*a[1*4+1]+i*a[1*4+2],n[2]=o*a[2*4+0]+c*a[2*4+1]+i*a[2*4+2],n}function ue(e,r){return r=r||new t(16),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}return{copy:ue,lookAt:ne,addVectors:g,subtractVectors:A,scaleVector:R,distance:te,distanceSq:s,normalize:y,compose:Fe,cross:B,decompose:v,dot:oe,identity:ce,transpose:ae,length:w,lengthSq:Z,orthographic:Ee,frustum:ve,perspective:ie,translation:he,translate:Te,xRotation:pe,yRotation:fe,zRotation:Se,xRotate:me,yRotate:xe,zRotate:Pe,axisRotation:le,axisRotate:Be,scaling:Ce,scale:Ue,multiply:T,inverse:E,transformVector:U,transformPoint:z,transformDirection:N,transformNormal:d,setDefaultType:h}});var nr=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif

varying vec2 vTextureCoords;
uniform sampler2D textureUnit;

void main() {
    vec4 texture = texture2D(textureUnit, vTextureCoords);
    gl_FragColor = texture;
}`,ar=`attribute vec3 vertex;
attribute vec2 textureCoords;
uniform mat4 ModelViewMatrix, ProjectionMatrix;
varying vec2 vTextureCoords;

void main() {
    vec4 vertPos4 = ModelViewMatrix * vec4(vertex, 1.0);
    vec3 vertPos = vec3(vertPos4) / vertPos4.w;
    gl_Position = ProjectionMatrix*vertPos4;
    vTextureCoords = textureCoords;
}`;function or(t,h,T,g,A){var R=new Array(3),y=new Array(3),w=new Array(3),Z,B;this.setView=function(v,x,E){w=x===void 0?[0,0,10]:x,E=E===void 0?[0,1,0]:E,Z=v,le(w,w),Be(y,w),Fe(y,y,Se(w,E)),Ue(y,E,y),le(y,y),Ie(R,y,w)},this.getViewMatrix=function(){var v=[R[0],y[0],w[0],0,R[1],y[1],w[1],0,R[2],y[2],w[2],0,0,0,0,1];if(B!==void 0){var x=B[0]-v[0]*B[0]-v[4]*B[1]-v[8]*B[2],E=B[1]-v[1]*B[0]-v[5]*B[1]-v[9]*B[2],U=B[2]-v[2]*B[0]-v[6]*B[1]-v[10]*B[2];v[12]=x,v[13]=E,v[14]=U}return Z!==void 0&&(v[14]-=Z),v},this.getViewDistance=function(){return Z},this.setViewDistance=function(v){Z=v},this.getRotationCenter=function(){return B===void 0?[0,0,0]:B},this.setRotationCenter=function(v){B=v},this.setView(T,g,A),t.addEventListener("mousedown",Ee,!1),t.addEventListener("touchstart",Te,!1);function oe(v,x){function E(N,d,ue){var e=2*(N[0]*d[0]+N[1]*d[1]+N[2]*d[2]);ue[0]=e*N[0]-d[0],ue[1]=e*N[1]-d[1],ue[2]=e*N[2]-d[2]}le(v,v),le(x,x);var U=[0,0,0];Ce(U,v,x),le(U,U);var z=[0,0,0];E(U,w,z),E(v,z,w),E(U,R,z),E(v,z,R),E(U,y,z),E(v,z,y)}var s,te,ce,ae,ne,ie=!1;function Ee(v){if(!ie){ie=!0,s=t.width/2,te=t.height/2;var x=Math.min(s,te);ce=x*x,document.addEventListener("mousemove",ve,!1),document.addEventListener("mouseup",he,!1);var E=t.getBoundingClientRect();ae=v.clientX-E.left,ne=v.clientY-E.top}}function ve(v){if(!!ie){var x=t.getBoundingClientRect(),E=v.clientX-x.left,U=v.clientY-x.top,z=xe(ae,ne),N=xe(E,U);oe(z,N),ae=E,ne=U,h&&h()}}function he(v){ie&&(document.removeEventListener("mousemove",ve,!1),document.removeEventListener("mouseup",he,!1),ie=!1)}function Te(v){if(v.touches.length!=1){fe();return}v.preventDefault();var x=t.getBoundingClientRect();ae=v.touches[0].clientX-x.left,ne=v.touches[0].clientY-x.top,t.addEventListener("touchmove",pe,!1),t.addEventListener("touchend",me,!1),t.addEventListener("touchcancel",fe,!1),touchStarted=!0,s=t.width/2,te=t.height/2;var E=Math.min(s,te);ce=E*E}function pe(v){if(v.touches.length!=1||!touchStarted){fe();return}v.preventDefault();var x=t.getBoundingClientRect(),E=v.touches[0].clientX-x.left,U=v.touches[0].clientY-x.top,z=xe(ae,ne),N=xe(E,U);oe(z,N),ae=E,ne=U,h&&h()}function me(v){fe()}function fe(){touchStarted&&(touchStarted=!1,t.removeEventListener("touchmove",pe,!1),t.removeEventListener("touchend",me,!1),t.removeEventListener("touchcancel",fe,!1))}function xe(v,x){var E=v-s,U=te-x,z=E*R[0]+U*y[0],N=E*R[1]+U*y[1],d=E*R[2]+U*y[2],ue=z*z+N*N+d*d;if(ue>ce)return[z,N,d];var e=Math.sqrt(ce-ue);return[z+e*w[0],N+e*w[1],d+e*w[2]]}function Se(v,x){return v[0]*x[0]+v[1]*x[1]+v[2]*x[2]}function Pe(v){return Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2])}function le(v,x){var E=Pe(x);v[0]=x[0]/E,v[1]=x[1]/E,v[2]=x[2]/E}function Be(v,x){v[0]=x[0],v[1]=x[1],v[2]=x[2]}function Ce(v,x,E){v[0]=x[0]+E[0],v[1]=x[1]+E[1],v[2]=x[2]+E[2]}function Ue(v,x,E){v[0]=x[0]-E[0],v[1]=x[1]-E[1],v[2]=x[2]-E[2]}function Fe(v,x,E){v[0]=x[0]*E,v[1]=x[1]*E,v[2]=x[2]*E}function Ie(v,x,E){var U=x[1]*E[2]-x[2]*E[1],z=x[2]*E[0]-x[0]*E[2],N=x[0]*E[1]-x[1]*E[0];v[0]=U,v[1]=z,v[2]=N}}const Je=[{id:"eyeSeparation",label:"Eye Separation",min:0,max:10,step:.01,value:2,elementRef:null},{id:"fov",label:"Field of View",min:.5,max:3,step:.01,value:1.45,elementRef:null},{id:"nearClippingDistance",label:"Near Clipping Distance",min:1,max:20,step:.5,value:10,elementRef:null},{id:"convergenceDistance",label:"Convergence distance",min:1,max:100,step:1,value:40,elementRef:null}],tr=t=>{const h=document.querySelector(t);h.innerHTML="",Je.forEach(T=>{const g=document.createElement("div"),A=document.createElement("div");A.classList.add("title-wrapper");const R=document.createElement("label");R.setAttribute("for",T.id),R.innerHTML=T.label;const y=document.createElement("span");y.setAttribute("class","slider-value"),y.innerHTML=T.value;const w=document.createElement("input");w.setAttribute("id",T.id),w.setAttribute("type","range"),w.setAttribute("min",T.min),w.setAttribute("max",T.max),w.setAttribute("step",T.step),w.setAttribute("value",T.value),w.addEventListener("input",Z=>{y.innerHTML=Z.target.value}),T.elementRef=w,g.appendChild(A),A.appendChild(R),A.appendChild(y),g.appendChild(w),h.appendChild(g)})},Le=t=>{var T;const h=Je.find(g=>g.id===t);return parseFloat((T=h==null?void 0:h.elementRef)==null?void 0:T.value,10)},ir=()=>new Promise(async(t,h)=>{try{const T=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});t(T)}catch(T){h(T)}}),cr=()=>document.getElementById("webcam").checked,ur=t=>{const h=document.getElementById("webcam");h.addEventListener("change",async T=>{h.checked?t.srcObject=await ir():t.srcObject=null})},vr=t=>{const h=t.createTexture();return t.bindTexture(t.TEXTURE_2D,h),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),h};let f,De,Ve,G,Qe,Xe,$e,be;function He(t){this.name=t,this.iVertexBuffer=f.createBuffer(),this.iTextureBuffer=f.createBuffer(),this.count=0,this.BufferData=function(h,T){f.bindBuffer(f.ARRAY_BUFFER,this.iVertexBuffer),f.bufferData(f.ARRAY_BUFFER,new Float32Array(h),f.STREAM_DRAW),f.bindBuffer(f.ARRAY_BUFFER,this.iTextureBuffer),f.bufferData(f.ARRAY_BUFFER,new Float32Array(T),f.STREAM_DRAW),f.enableVertexAttribArray(G.iTextureCoords),f.vertexAttribPointer(G.iTextureCoords,2,f.FLOAT,!1,0,0),this.count=h.length/3},this.Draw=function(){f.bindBuffer(f.ARRAY_BUFFER,this.iVertexBuffer),f.vertexAttribPointer(G.iAttribVertex,3,f.FLOAT,!1,0,0),f.enableVertexAttribArray(G.iAttribVertex),f.bindBuffer(f.ARRAY_BUFFER,this.iTextureBuffer),f.vertexAttribPointer(G.iTextureCoords,2,f.FLOAT,!1,0,0),f.enableVertexAttribArray(G.iTextureCoords),f.drawArrays(f.TRIANGLE_STRIP,0,this.count)}}function fr(t,h){this.name=t,this.prog=h,this.iAttribVertex=-1,this.iTextureCoords=-1,this.iTextureUnit=-1,this.Use=function(){f.useProgram(this.prog)}}function se(){f.clearColor(0,0,0,1),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT);const t=Le("eyeSeparation"),h=Le("fov"),T=Le("nearClippingDistance"),g=Le("convergenceDistance"),A=2e3;let R,y,w,Z;w=T*Math.tan(h/2),Z=-w;const B=Math.tan(h/2)*g,oe=B-t/2,s=B+t/2;R=-oe*T/g,y=s*T/g;const te=m4.orthographic(R,y,Z,w,T,A);R=-s*T/g,y=oe*T/g;const ce=m4.orthographic(R,y,Z,w,T,A),ae=Qe.getViewMatrix(),ne=m4.axisRotation([.707,.707,0],0),ie=m4.translation(-.01,0,-20),Ee=m4.translation(.01,0,-20),ve=m4.multiply(ne,ae);if(cr()){const pe=m4.orthographic(0,1,0,1,-1,1),me=m4.multiply(ne,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);f.uniformMatrix4fv(G.iModelViewMatrix,!1,me),f.uniformMatrix4fv(G.iProjectionMatrix,!1,pe),f.bindTexture(f.TEXTURE_2D,$e),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,be),Ve.Draw()}f.bindTexture(f.TEXTURE_2D,Xe),f.clear(f.DEPTH_BUFFER_BIT);const he=m4.multiply(ie,ve);f.uniformMatrix4fv(G.iModelViewMatrix,!1,he),f.uniformMatrix4fv(G.iProjectionMatrix,!1,te),f.colorMask(!0,!1,!1,!1),De.Draw(),f.clear(f.DEPTH_BUFFER_BIT);const Te=m4.multiply(Ee,ve);f.uniformMatrix4fv(G.iModelViewMatrix,!1,Te),f.uniformMatrix4fv(G.iProjectionMatrix,!1,ce),f.colorMask(!1,!0,!0,!1),De.Draw(),f.colorMask(!0,!0,!0,!0)}let Ne=1;function lr(t,h){return t*Math.cos(h)/Ne}function hr(t,h){return t*Math.sin(h)/Ne}function pr(t,h,T,g,A,R,y){let w=g*Math.PI/T;return A*Math.pow(Math.E,-R*t)*Math.sin(w*t+y)/Ne}let ze=6,We=6,je=4,ke=.5,Ze=0;const de=ze,er=2*Math.PI,mr=(t,h)=>[t/er,h/de],Ke=(t,h,T,g,A,R,y,w,Z)=>{const B=lr(t,h),oe=hr(t,h),s=pr(t,h,T,g,A,R,y);w.push(B,oe,s),Z.push(...mr(h,t))};function xr(){const t=[],h=[];for(let T=0;T<=de;T+=.001)for(let g=0;g<er;g+=.5)Ke(T,g,ze,We,je,ke,Ze,t,h),Ke(T+.5,g+.5,ze,We,je,ke,Ze,t,h);return{vertexList:t,textureList:h}}function Er(){let t=Tr(f,ar,nr);G=new fr("Basic",t),G.Use(),G.iAttribVertex=f.getAttribLocation(t,"vertex"),G.iModelViewMatrix=f.getUniformLocation(t,"ModelViewMatrix"),G.iProjectionMatrix=f.getUniformLocation(t,"ProjectionMatrix"),G.iTextureCoords=f.getAttribLocation(t,"textureCoords"),G.iTextureUnit=f.getUniformLocation(t,"textureUnit"),De=new He("Surface");const{vertexList:h,textureList:T}=xr();De.BufferData(h,T),Ve=new He("Background"),Ve.BufferData([0,0,0,1,0,0,1,1,0,1,1,0,0,1,0,0,0,0],[1,1,0,1,0,0,0,0,1,0,1,1]),Rr(),f.enable(f.DEPTH_TEST)}function rr(){se(),window.requestAnimationFrame(rr)}function Tr(t,h,T){let g=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(g,h),t.compileShader(g),!t.getShaderParameter(g,t.COMPILE_STATUS))throw new Error("Error in vertex shader:  "+t.getShaderInfoLog(g));let A=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(A,T),t.compileShader(A),!t.getShaderParameter(A,t.COMPILE_STATUS))throw new Error("Error in fragment shader:  "+t.getShaderInfoLog(A));let R=t.createProgram();if(t.attachShader(R,g),t.attachShader(R,A),t.linkProgram(R),!t.getProgramParameter(R,t.LINK_STATUS))throw new Error("Link error in program:  "+t.getProgramInfoLog(R));return R}async function Mr(){tr("#controls");let t;try{if(t=document.getElementById("webglcanvas"),f=t.getContext("webgl"),be=document.createElement("video"),be.setAttribute("autoplay","true"),$e=vr(f),ur(be),!f)throw"Browser does not support WebGL"}catch{document.getElementById("canvas-holder").innerHTML="<p>Sorry, could not get a WebGL graphics context.</p>";return}try{Er()}catch(h){document.getElementById("canvas-holder").innerHTML="<p>Sorry, could not initialize the WebGL graphics context: "+h+"</p>";return}Qe=new or(t,se,0),rr()}async function _r(){return new Promise((t,h)=>{const T=new Image;T.src="texture.png",T.crossOrigin="anonymous",T.addEventListener("load",function(){t(T)})})}const Rr=async()=>{const t=await _r();Xe=f.createTexture(),f.bindTexture(f.TEXTURE_2D,Xe),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,t)};document.addEventListener("DOMContentLoaded",Mr);
